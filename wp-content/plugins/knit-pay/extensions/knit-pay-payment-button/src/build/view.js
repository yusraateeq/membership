jQuery(document).ready((function(){function t(t,e){"INPUT"===t.prop("tagName")?t.val(e):t.text(e)}jQuery(".knit-pay-payment-button-submit-class").on("click",(function(e){jQuery("#knit-pay-payment-button-error").remove(),e.preventDefault();var n=e.currentTarget;if(n.attributes.disabled)return;n.setAttribute("disabled","");var a="#"+n.closest("form").id,r=jQuery(a+" #knit-pay-payment-button-submit");t(r,"Please wait...");let i=jQuery.Deferred();var o=window.open(knit_pay_payment_button_ajax_object.loading_icon,"knitpayPaymentWindow","width=400,height=720");jQuery.post(knit_pay_payment_button_ajax_object.ajaxurl,{action:"knit_pay_payment_button_submit",knit_pay_nonce:jQuery(a+" #knit_pay_nonce").val(),amount:jQuery(a+" #knit_pay_payment_button_amount").val(),currency:jQuery(a+" #knit_pay_payment_button_currency").val(),payment_description:jQuery(a+" #knit_pay_payment_button_payment_description").val(),config_id:jQuery(a+" #knit_pay_payment_button_config_id").val()},(function(e){if(n.removeAttribute("disabled"),t(r,r.attr("knit-pay-button-text")),"success"==(e=JSON.parse(e)).status)return function(t,e){var n=window.open(t,"knitpayPaymentWindow","width=400,height=720"),a=setInterval((function(){n.closed&&(clearInterval(a),e.resolve())}),1e3)}(e.redirect_url,i);i.reject({message:e.message}),o.close(),jQuery("<div id='knit-pay-payment-button-error' style='color: red;'>"+e.error_msg+"</div>").insertAfter(n)}))}))}));